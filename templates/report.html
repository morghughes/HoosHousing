{% load i18n %}

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>{% trans "Report Form" %}</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    body {
      background-color: #2b5fc8;
    }
    .container {
      padding-top: 20px;
      padding-left:0;
    }
    .card {
      margin: auto;
      max-width: 600px;
    }
    .checkbox-label {
        color: #6c757d;
        font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-8 offset-md-2">
          {% if messages %}
              <div id="message-container">
                  {% for message in messages %}
                      {% if 'form_error' in message.tags %}
                          <div class="alert alert-danger text-center">{{ message }}</div>
                      {% endif %}
                  {% endfor %}
              </div>
          {% endif %}
        <div class="card">
          <div class="card-header">
            <h4 class="card-title">{% trans "Report Form" %}</h4>
          </div>
          <div class="card-body">
            <form action="{% url 'submit' %}" method="post" enctype="multipart/form-data">
              {% csrf_token %}
                <div class="form-group">
                <label for="location">{% trans "Where was this?" %}</label>
                <select class="form-control" id="location" name="location">
                    <option value="" disabled selected>Select supported location</option>
                    {% for value, name in LOCATION_POSSIBILITIES %}
                        <option value="{{ value }}" {% if value == location %}selected{% endif %}>{{ name }}</option>
                    {% endfor %}
                </select>
              </div>

              <div class="form-group">
                <label for="type">{% trans "Select report type:" %}</label>
                  <select class="form-control" id="type" name="type">
                      <option value="" disabled selected>Select type of report</option>
                      {% for value, name in TYPE_CHOICES %}
                          <option value="{{ value }}" {% if value == type %}selected{% endif %}>{{ name }}</option>
                      {% endfor %}
                </select>
              </div>
              <div class="form-group">
                  <input type="checkbox" name="is_public" id="is_public" {% if is_public %}checked{% endif %}>
                  <label for="is_public" class="checkbox-label">{% trans "Would you like to make your report public so that other users can upvote your report? By checking this, you are consenting that other users may view your report's title, ID, location, and status. They will not be able to see your username or any other information unspecified." %}</label>
              </div>
              <div class="form-group">
                <label for="title">{% trans "Provide a one-line title about your report:" %}</label>
                <input type="text" class="form-control" id="title" name="title" placeholder="{% trans "ex: '3rd floor lobby loud at 3am'" %}" value="{{ title }}" maxlength="60"></input>
              </div>
              <div class="form-group">
                <label for="comment">{% trans "Add description about your report:" %}</label>
                  <textarea class="form-control" id="comment" name="comment" placeholder="{% trans 'Provide details for report here' %}">{{ comment }}</textarea>
                  {% if error_message %}<div class="alert alert-danger" role="alert">{{ error_message }}</div>{% endif %}
              </div>
                <div class="form-group">
                    <input type="checkbox" name="public_description" id="public_description" {% if public_description %}checked{% endif %}>
                    <label for="public_description" class="checkbox-label">{% trans "Make description public?" %}</label>
                </div>

              <div class="form-group">
                <label for="file">{% trans "Upload files (Optional):" %}</label>
                <input type="file" class="form-control-file" id="file" name="files" accept=".pdf, .jpeg, .png, .jpg" multiple>
              </div>
                <div class="form-group">
                    <input type="checkbox" name="public_files" id="public_files" {% if public_files %}checked{% endif %}>
                    <label for="public_files" class="checkbox-label">{% trans "Make files public?" %}</label>
                </div>

                <div class="form-group row">
                    <div class="col-sm-6">
                        <button type="submit" class="btn btn-primary">{% trans "Submit" %}</button>
                    </div>
                    <div class="col-sm-6 text-right">
                        <a href="{% url 'home' %}" class="btn btn-danger" role="button">Cancel</a>
                    </div>
                </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.0.9/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script>
      $(document).ready(function() {
          // Fade out messages after 5 seconds
          setTimeout(function() {
              $('#message-container').fadeOut('slow');
          }, 7000);
      });
  </script>
</body>
</html>



